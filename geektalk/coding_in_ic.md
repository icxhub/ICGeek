# 作者：IC 极客交流群

## 关于我们 ：

> 1. IC 极客之家由IC 行业的几位工程师发起，以公益，开源，分享为宗旨，致力于推广IC 极客文化，组织大家深入交流IC 设计领域知识，经验及方法学，打造IC 设计圈的思想国。
> 2. 极刊，极说，极问文章请关注公众号icgeeks. 极刊为独立撰稿人关于IC 设计的技术分享，极说与极问基于讨论交流信息整理，内容由技术委员会确认发布。
> 3. 欢迎文末留言参与讨论，入群，群内服务及合作请联系微信号sgsphoto

## 导读

![aa](../res/img/code.png)

## Q1. 选一种或几种你熟悉的编程语言，总结一下它的特点，优缺点和应用场景

### &#9758; 1

编程语言： python。

优点： 语法简洁（入门快），库资源丰富（应用场景广泛），开发效率高，易于维护（看开发者水平啦）。

缺点： 运行速度慢（IC应用场景中完全可以接受），不能加密（有些脚本中会有涉密信息，或者工具怕被篡改，这种场景用python就比较头疼）。

应用场景： IC设计流程自动化（CAD），IC脚本程序（ICer）。其实IC设计中绝大多数用shell和perl实现的都可以改用python来实现。

### &#9758; 2

Python：应用范围非常广，开发效率高，推荐学习，未来能用的地方很多；经典应用场景：数据分析、爬虫、web服务、图像处理等

Tcl：语法简单上手快，ic领域适用范围广；经典应用场景：基于eda的任务实现（tcl script大部分可以直接在eda 软件中运行，兼容性好）

### &#9758; 3

Tcl/PHP/Python

Tcl 是EDA 工具的接口语言，Linux 环境和EDA 环境通用，而且各个工具基本是同样支持的

PHP 网页使用的脚本语言，上手快，易学好用，也可以做到网页平台和cmdline 共享一个脚本，实现功能。

Python 支持的库多，应用场景丰富。脚本语言的缺点都是运行效率问题，小程序看不出来，一大就明显了，php 和python 不少库需要编译，很多时候我们不能自己安装库，Tcl 非编译的库可以自己安装。

场景：Tcl 流程控制，功能粘合，Php 网页应用，数据库连接，Email 读取发送，Python 数据分析，爬虫

### &#9758; 4

Python功能强大，简单易学，适合小白，同perl一样重点是解决问题，不是语言自身，包容性，扩展性强。1可读性强，规范。2易维护，优化很重要。3代码效率高。

### &#9758; 5

Verilog vs TCL for verdi dump，起初，大家学的都是用Verilog系统函数来Dump波形，但是，当需求复杂时，真的没有Tcl好用，还是应该切换到TCL

## Q2. 选一种或几种你熟悉的编程语言，给新手推荐一些入门级的学习资料及编程任务

### &#9758; 1

熟悉语言： python，perl

学习资料： 看一本入门书籍就行了，更多的知识点需要的时候网上查资料。python入门推荐《python基础教程》，perl入门推荐《perl语言入门》（小骆驼书）。

编程任务： 其实这几门语言的推荐入门方式都是一样的，首先略一遍基础教程，然后把手头上的shell/tcl小程序全部用python/perl改写一遍（熟悉语法），然后自己写几个200行以上的新程序（掌握数据结构和编程逻辑），新程序中一定要包含进阶知识点，通过查资料最终解决，这样基本上就入门初级

### &#9758; 2

Python的语法比较简单，个人建议学习语言不要过多关注语法，看一下基本用法，需要了再去网上查

可以编程实现的工作：日常工作中需要做第二遍以上，或者单一任务重复迭代第三次以上，都可以脚本来做

写代码之前的算法和数据结构思考比代码本身重要，能正确实现功能就算基本完成任务了，不宜在一开始过多注意coding本身的细节（对于python）

### &#9758; 3 

[为什么选择Python](https://mp.weixin.qq.com/s/qhG9f0WTzUruHgzgldEHSQ)

https://mp.weixin.qq.com/s/qhG9f0WTzUruHgzgldEHSQ

### &#9758; 4

资料推荐过书单了(参考公众号内小程序文章 IC 极客荐书)，还有各种工具和别人开源的内容，后者的实践性更大，要保持对工具的热情，我个人觉得工程类 CAD 本身就是玩工具的。刚发的文章可以参考，本身就是讲这个问题的。

### &#9758; 5

顺便分享一下自己学习skill的经验。

优点：很多场景下都可以极大的提升模拟layout的工作效率，节约时间，（不得不承认layout是个苦力活）大公司应该都有专门的CAD，做模拟layout的朋友应该多少都接触过skill脚本，简单的如metal换层，十字ruler，复杂的如自动跳线（修天线DRC）等。缺点就是内置函数太多（其实这也是一种优点），成百上千个，如何快速准确地定位到合适的函数是个问题（自带的API finder似乎不支持通配符）。

因为我也是初学者，接触不到三个月，一开始学习了解skill的基本语法以及数据架构DFII，主要通过cadence官方的user guide，然后查看学习同事写的简单脚本（小于50行），熟悉一些常用函数，理解之后自己写脚本实现一些简单的功能；然后看一些稍微复杂一点的脚本（100-300行），熟悉更多内置函数的基本用法，之后结合工作需求，尝试自己写出200行以上的代码（其实复杂的代码也是有若干个简单的子代码集成的）。此时你应该对skill的语法、数据结构、常用函数较为熟悉了，往后的提升可能就在于熟悉更多的内置函数，灵活运用，结合需求，高效coding。 推荐的学习资源首选官方user guide，其次官方skill论坛以及eetop论坛。对了skill代码debug的话 使用自带的IDE还算方便。暂时想到这么多，希望对skill感兴趣的朋友有所帮助。

### &#9758; 6

learning perl

- https://qntm.org/files/perl/perl.html
- 进阶看 https://pragprog.com/book/swperl/modern-perl-fourth-edition
- 还有 https://m.douban.com/book/subject/1438756/
- 更进阶看 https://hop.perl.plover.com  high order perl
- 常用 perltidy，perlcritic
- 格式化，和 lint perl code
- 来点基础的，搞清 Perl的 backticks, system, and exec 区别 https://stackoverflow.com/questions/799968/whats-the-difference-between-perls-backticks-system-and-exec
- 学会一个模板系统，不要所有输出都是无数print $fh "$var \n"；接下来学会怎么并行执行一些任务

## Q3. 选一种或几种你熟悉的编程语言，分享一下你心目中最重要的三条编程修养

### &#9758; 1

直接借鉴《代码大全》的核心思想吧。合理缩进的代码（层次性）；简洁有效的变量名（易读）；详尽而有效的注释（可维护性）。

### &#9758; 2

多思考，想清楚再写；代码不要怕重构，不厌其烦的优化；多写注释和单元测试
编程的核心还是算法+数据结构，语言选择适当的就好

### &#9758; 3

- 注释（文件头(版权, 作者, 版本, 修改记录, 成熟度和风险)、变量、函数、协议）、
- 文档（详细、与代码匹配、代码的工作流程、安装使用说明）、
- 排版（变量命名规范、{}出现在行头还是行尾、缩进、空行、空格等最为重要）

### &#9758; 4

编程，看上去很美，对齐，变量名有意义，有注释；用起来很美，有实例，有Demo；维护很美，封装恰到好处，有文档

### &#9758; 5

specmanE和systemVerilog，其中，SpecmanE的面向方面让我感到恐惧，因为这个语言太方便了，可以在任何位置轻松扩展，以至于很难管理好团队的代码结构，你需要不停出coding rules，让它用起来没那么方便；SystemVerilog的面向对象结构化就好很多，不方便扩展带来的优势是设计有了模式。

### &#9758; 6

《建筑的永恒之道》说要理解模式在构造复杂系统时的重要性，后来有了程序的《设计模式》，很难讲自己搭的具体的环境有什么特别之处，因为它们都是乐高件。


## Q4. 选择一个应用场景，分享一段你写的代码的功能和实现思路

---

### &#9758; 1

- 场景: 为看图工具eog增加功能，显示鼠标处的坐标和rgb颜色值
- 思路: 鼠标坐标映射到图片的坐标，从图像数据结构中取数据，结果显示在statusbar

### &#9758; 2

关注本公众号极客专栏 Tcl 系列专题文章

### &#9758; 3

我说一个应用场景。多核集成的top前端设计，一大工作是端口互联。15年左右曾用vperl来提效率，它的好处是可以应用perl正则对文本匹配，几行perl经过解释器以后生成verilog互联，上百倍提升效率。后来，模块信号升级，关键字也随着变化，散落在脚本里又不方便了。同时，互联架构升级需要模块设计与算法架构师共同探讨，所以方便朴素的形式是excel，那么就开始设计一套excel表格形式，针对它写perl，再在vperl中调用这个解析excel的perl脚本，复用之前的vperl。整体上彻底解决了部门之间只基于交流一套文档的问题。

后来17年换了工作任务。当时的架构人员有软件工具链方面的参与，讲究c++面向对象、gcc、llvm这些，他们讨论接口要用package/class封装、集成、扩展，所以就会出于沟通效率，上基于scala的chisel来讨论接口和实现互联。在这个应用方面，chisel和sv同等方便。

提出场景，推荐的也有意思，被推荐的也有劲，越白送越白费。所以先讨论场景是次序问题。

### &#9758; 4

前公司的flow中有一个是用脚本自动生成full chip的psub layer，我自己最近也在学skill，目前写出来的脚本虽然算法没问题，主要用到了一个函数dbGetOverlaps抓取底层layer，然后通过布尔运算，生成psub，但是当chip面积达到一定程度之后，这种方式的效率极其低下，计算量太大了，virtuoso直接卡死。

你司谁熟悉svrf 找他去写，非常容易的，就几句话。

calibredrv ，官网有tcl脚本栗子

可以看一下calibredrv的manual，很多封装好的tcl 函数可以直接调用，对gds进行各种操作

### &#9758; 5

在日常的soc中，rom的程序时需要固化在flash中的，但是rom的内容由软件组提供，然后需要分别在asic的仿真模型和fpga的仿真模型中分别把软件转换成机器码，这个工作之前都是由人完成的，后来我嫌麻烦就把这歌流程写成脚本了。主要思路就是首先对用户输入需要生成何种的文件进行判断，由于目标rom的大小不同，大小端不一定一样也需要强制设置，然后调用编译器把目标文件生成二进制码，然后根据大小端分别把数据分开再重组，最后根据需要生成的文件时mif还是coe啥的再重新分配一下。就行，2年前刚入职的时候写的，现在想想好low啊，不过确实在工作中节约了很多时间。

## Q5. 推荐一个你最常用的配置文件格式，以及用于配置什么内容

### &#9758; 1

 tcl 和 Json，tcl 直观，对于数字工程师都能看懂，用在工具里无任何违和感，做为任何tcl 流程的配置文件。json 支持的语言丰富，基于k-v，好处是不同语言编写的程序配置统一化，确定就是略复杂，最好面向CAD 开发人员。

### &#9758; 2

我后面讲tcl 和csv 的时候深深挖一下excel ，csv，有深意，有不少人用excel做项目管理的，也很有效果

### &#9758; 3

配置文件的话就是用excel做为生成寄存器模块的源文件，使用了perl的一个模块进行excel模块读写的。

## Q6. 你如何管理自己的代码？

### &#9758; 1

尤其是对于较大规模的代码，用版本管理工具还是十分有必要的。

在公司中用过perforce和svn（公司会统一要求，自己没有选择余地），自己用git（配置简单，功能强大，可以单机使用）。

### &#9758; 2

建本地SVN管理代码

### &#9758; 3

代码管理我用git，代码能写成函数或者包的尽量封起来，留option接口，注释配合实例让自己很久没碰某个代码也能快速回忆起来。

### &#9758; 4

留一个help参数，当什么参数都不加时自动输出帮助信息。时间再长都不怕

### &#9758; 5

公司用的是cvs，文档用的svn，我自己用git

## Q7. 在软件工程中，分享一些开发包管理，接口设计，数据结构设计的经验和坑

### &#9758; 1

perl中的坑太多，所以用过两年后就放弃了。

python只提一个大坑，在数据传递，尤其是包含函数迭代结构中的数据传递，最好不要用varA=varB的方式，用varA=copy.deepcopy(varB)是比较保险的，具体原因请百度。

### &#9758; 2

开发避免自己造轮子，自己造的轮子没有完善的API，输出单一，只有轮子开发者用，网络上没人用。接口设计需要完备和自适应，良好和统一的命名规则，当出项问题时可以有方法workaround，而不是等开发人员debug 一两天。

### &#9758; 3

vim的leaderf插件了解下？有了这个插件基本上网上那种教你把vim配置成IDE的文章不用看了，有那个插件就够了

## Q8. 推荐几个你熟悉的开源EDA 工具，开发框架或开发包

### &#9758; 1

用过pyverilog，一款verilog代码解析和生成的开源python包。

我自己有在写一款openlava数据采集和前台监控的系统，过一阵会开源出来，欢迎感兴趣的童鞋联系我，共同开发和测试。

（注：可以把openlava当做开源的lsf，不过lsf是商业软件，有一整套配套的监控软件，openlava以前是开源免费的，没有很好地后台数据收集和前台数据展示，答主就自己写了份，理论上lsf也完全可以用。）

### &#9758; 2

- ngspice http://ngspice.sourceforge.net/index.html
- opentimer https://web.engr.illinois.edu/~thuang19/software/timer/OpenTimer.html
- esim https://esim.fossee.in/

### &#9758; 3

分享一个python库大全，写程序必备。

https://docs.python.org/3/library/index.html

### &#9758; 4

开源的话我之前没有接触过，不太懂，倒是学生时代玩过openmsp430，在opencoe上的那个，刚开始接触这一块的时候拿来学习了一下，做为入门还是挺有意思的。近期在研究pyverilog，等以后在看看吧。

## Q9. 当在开发中需要用到verilog，gds， lib, spi，lef 等数据格式的解析和信息提取或结果可视化，你有什么推荐的EDA 工具，开源工具或开发包？推荐理由？使用中有什么优缺点

## Q10. 关于coding style 你有哪些不错的推荐？

### &#9758; 1

我们公司用了一套工具，可以自动格式化代码，声明端口与信号，所以对我们的要求就是在进行赋值语句的时候两边都需要明确信号的位宽。其他的没啥。不过那个已经是上古遗迹了，不支持新版本的verilog语法，也没人有动力去做这个支持

## Q11. 在你的专业领域里，分享几个编程快速提升效率的应用场景和实例

### &#9758; 1

在IC流程中可能很大一部分人工工作都耗费在log/result check中，我们做过一款synthesis/lec/clp/sta/DFT的流程自动化工具，工具实现的功能如下：

- 自动check out项目源代码（源代码由svn管理），构建运行目录。
- 接口openlava系统，自动分发运行任务，后台检测任务运行状态。
- 任务运行完毕后，自动进行log/result check （我们有一整套的基于项目的log/result check item管理配置），生成基于check项的结果检查报告，用图形界面的方式分别报告error/warning/review结果。

整套流程，尤其是log/result check的部分，能够将ICer从繁琐的人工检查中解放出来，提高生产效率。

### &#9758; 2

分享一些perl脚本实例，比如仿真、网表处理等。
[Perl在ASIC中的应用合集](https://mp.weixin.qq.com/s/X_YyeSW9f4orx2eS01dvAg)

### &#9758; 3

eda 工具有很多模拟手动操作的命令，可以结合这些命令以及特定的坐标，形状等信息进行custom work 自动化。

### &#9758; 4

讲个实际应用，比如说，运行所有的仿真case，解析所有log，汇总报告，群发邮件。支持多个仿真器，支持v，vhd，sv，支持uvm。

首先是选择配置，你的regression list 怎么描述，Excel？ xml？ yaml or jason， 甚至plain text。

还有就是输出的目录结构，compilation和optimization ,simulation output怎么放，大的design compilation策略是怎样的，是否并行 compile sub block，是否支持incremental compile，dut compilation，甚至optimization在testcase里复用，cosim中 c 代码怎么compile， 

然后就是怎样把 testcase list expand到最终的 simulator option上去，怎么支持各种grid farm，怎么添加 hook方便 user script 调用。

再然后是simulation post process，log parsing， coverage merge

### &#9758; 5

懒惰是前进的动力

## Q13.  coding style有哪些不好的习惯和坑。

### &#9758;

- 超长类和超长函数
- 没有空格和空行
- 嵌套层次太深
- 变量或函数身兼数职

## Q14. 有没有好的查看sv代码的工具，可以看到代码的层次化结构的

### &#9758; 1

emacs、gvim 插件

### &#9758; 2

直接上verdi吧

### &#9758; 3

m家vrm ， c家 vmanager

### &#9758; 4

http://sveditor.sourceforge.net/
